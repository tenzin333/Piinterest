import{r as m,j as e,b as u,d as p}from"./index-DCcHb4NS.js";import{C as h}from"./Container-3Xoo4Gm6.js";import{C as x}from"./Card-By4HftGi.js";import"./ThemeProvider-A0tfmR5y.js";import"./CardHeaderContext-BBklMGiQ.js";const v="data:image/svg+xml,%3csvg%20width='34'%20height='34'%20viewBox='0%200%2034%2034'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_3653_67307)'%3e%3cpath%20d='M19.8327%202.83331H8.49935C6.94102%202.83331%205.68018%204.10831%205.68018%205.66665L5.66602%2028.3333C5.66602%2029.8916%206.92685%2031.1666%208.48518%2031.1666H25.4993C27.0577%2031.1666%2028.3327%2029.8916%2028.3327%2028.3333V11.3333L19.8327%202.83331ZM8.49935%2028.3333V5.66665H18.416V12.75H25.4993V28.3333H8.49935Z'%20fill='%2357606F'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_3653_67307'%3e%3crect%20width='34'%20height='34'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",j=({formData:t,setFormData:n})=>{const[c,s]=m.useState(""),d=l=>{l.key==="Enter"&&c.trim()!==""&&(l.preventDefault(),t.tags.includes(c.trim())||n({...t,tags:[...t.tags||[],c.trim()]}),s(""))},g=l=>{n({...t,tags:t.tags.filter((o,i)=>i!==l)})};return e.jsxs("div",{className:"tag-input-wrapper",children:[" ",e.jsxs("div",{className:"tag-input-container",children:[e.jsx("input",{type:"text",className:"tag-input-field",placeholder:"Add a tag and press Enter...",value:c,onChange:l=>s(l.target.value),onKeyDown:d}),e.jsx("div",{className:"tags",children:t.tags.map((l,o)=>e.jsxs("span",{className:"tag",children:[l,e.jsx("button",{onClick:()=>g(o),children:"Ã—"})]},o))})]})]})},_=()=>{const{profile:t}=u(),[n,c]=m.useState({}),[s,d]=m.useState({description:"",tags:[],visibility:"private",image_url:""}),g=async i=>{i.stopPropagation(),i.preventDefault();try{const a=await l(),r={tags:s.tags,image_url:a,description:s.description,user_id:t.user_id,created_saved:"C",visibility:s.visibility},f=await p.upsert("images",r,["user_id","image_url"]);alert("Saved")}catch(a){alert(a),console.log(a)}},l=async()=>{let i=s.visibility==="public"?"public_images":"private_images",a,r;return i==="public_images"?(r=`images/${Date.now()}_${n.imageFile.name}`,await p.uploadImage(i,n.imageFile,r,!0),a=await p.getImageUrl(i,r)):(r=`${t.user_id}/${i}/images/${Date.now()}_${n.imageFile.name}`,await p.uploadImage(i,n.imageFile,r,!0),a=await p.getSignedUrl(i,r)),a},o=i=>{const a=i.target.files[0];a&&c({imageFile:a,name:a.name,imageUrl:URL.createObjectURL(a)})};return e.jsxs(h,{md:12,className:"main-content",children:[e.jsx("div",{children:e.jsx("h3",{children:"Create Pix"})}),e.jsxs(x,{className:"d-flex justify-content-evenly flex-row",style:{borderRadius:"30px"},children:[e.jsxs("div",{className:"d-flex justify-content-center flex-column align-items-center m-3",children:[e.jsx("div",{className:"drop-files-area",children:e.jsxs("label",{htmlFor:"file-upload",className:"upload-label",children:[e.jsx("span",{className:"upload-icon",children:e.jsx("img",{src:v,alt:"Upload Icon"})}),e.jsx("p",{children:"Drop files here or click to upload"})]})}),n.imageUrl&&e.jsx("div",{className:"image-preview-container mt-2",children:e.jsx("img",{src:n.imageUrl,alt:"Preview",className:"image-preview"})}),e.jsx("button",{style:{backgroundColor:"#eb4242",color:"white"},onClick:g,children:"Save Changes"})]}),e.jsx("div",{style:{width:"40%"},children:e.jsxs("div",{className:"d-flex justify-content-center flex-column gap-2 my-3",children:[e.jsxs("span",{className:"d-flex flex-column gap-2",children:[e.jsx("label",{htmlFor:"desc",children:e.jsx("b",{children:"Description"})}),e.jsx("textarea",{placeholder:"Add a detailed description",style:{width:"100%"},value:s.description,name:"description",id:"description",onChange:i=>d({...s,description:i.target.value})})]}),e.jsxs("span",{className:"d-flex flex-column gap-2",children:[e.jsx("label",{htmlFor:"visibility",children:e.jsx("b",{children:"Visibility"})}),e.jsxs("select",{id:"visibility",value:s.visibility,onChange:i=>d({...s,visibility:i.target.value}),children:[e.jsx("option",{value:"public",children:"Public"}),e.jsx("option",{value:"private",children:"Private"})]})]}),e.jsxs("span",{className:"d-flex flex-column gap-2",children:[e.jsx("label",{htmlFor:"tags",children:e.jsx("b",{children:"Tags"})}),e.jsx(j,{formData:s,setFormData:d})]}),e.jsx("input",{id:"file-upload",type:"file",accept:"image/*",onChange:o,className:"file-input"})]})})]})]})};export{_ as default};
