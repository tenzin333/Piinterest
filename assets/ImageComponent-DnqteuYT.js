import{r as d,b,j as e,d as j}from"./index-DpHPn4wd.js";import{S as w}from"./skeleton-DZ5kkpxt.js";const f="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000000'%3e%3cpath%20d='M240-400q-33%200-56.5-23.5T160-480q0-33%2023.5-56.5T240-560q33%200%2056.5%2023.5T320-480q0%2033-23.5%2056.5T240-400Zm240%200q-33%200-56.5-23.5T400-480q0-33%2023.5-56.5T480-560q33%200%2056.5%2023.5T560-480q0%2033-23.5%2056.5T480-400Zm240%200q-33%200-56.5-23.5T640-480q0-33%2023.5-56.5T720-560q33%200%2056.5%2023.5T800-480q0%2033-23.5%2056.5T720-400Z'/%3e%3c/svg%3e",C=({handleSave:y,isSaved:T,image:s})=>{const[r,m]=d.useState(!1),[c,h]=d.useState(!1),{profile:k,user:x}=b(),t=p=>{const u=async(o,n="downloaded-image")=>{try{const v=await(await fetch(o)).blob(),l=URL.createObjectURL(v),a=document.createElement("a");a.href=l,a.download=n,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(l)}catch(i){console.error("Download failed",i)}},g=async()=>{try{const o={image_url:s.image_url,user_id:x.id,tags:s.tags,description:s.description,created_saved:"S",visibility:"private"},n=await j.upsert("images",o,["user_id","image_url"]);alert("Saved")}catch(o){console.log(o)}};switch(p){case"C":navigator.clipboard.writeText(s.url).then(()=>alert("Image link copied to clipboard!")).catch(o=>console.error("Failed to copy:",o));break;case"S":g();break;case"D":u(s.url,s.name);break}};return e.jsxs("div",{className:"masonry-item",children:[!c&&e.jsx(w,{height:200,width:"100%",borderRadius:8})," ",e.jsx("img",{src:s.image_url,alt:"image",className:c?"visible":"hidden",onLoad:()=>h(!0)}),e.jsxs("div",{className:"masonry-action-btns",children:[e.jsx("div",{className:"masonry-action-footer",children:e.jsx("img",{className:"action-icon",src:f,alt:"more",onClick:()=>m(!r)})}),r&&e.jsx("div",{className:"show-more  d-flex justify-content-center align-items-center",children:e.jsxs("ul",{className:"d-flex justify-content-center  flex-column px-1 py-2 m-0",children:[e.jsx("li",{children:e.jsx("a",{onClick:()=>t("S"),children:"Save Image"})}),e.jsx("li",{children:e.jsx("a",{onClick:()=>t("C"),children:"Copy Link"})}),e.jsx("li",{children:e.jsx("a",{onClick:()=>t("D"),children:"Download Image"})})]})})]})]})};export{C as I};
